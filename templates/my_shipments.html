<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Shipments â€” ShipTrack</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body class="dashboard">
    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>ShipTrack</h2>
                <button class="sidebar-toggle" id="sidebarToggle">â˜°</button>
            </div>
            <nav class="sidebar-nav">
                <a href="/dashboard" class="btn-secondary">ğŸ” Dashboard</a>
                <a href="/profile" class="btn-secondary">ğŸ‘¤ Profile</a>
                <a href="/my-shipments" class="btn-secondary active">ğŸ“¦ My Shipments</a>
                <a href="/devices" class="btn-secondary">ğŸ–¥ï¸ Devices</a>
            </nav>
        </aside>

        <main class="dashboard-main">
            <header class="dashboard-header">
                <h1>My Shipments</h1>
                <div class="logout-container">
                    <a href="/logout">Logout</a>
                </div>
            </header>

            <!-- Search Bar -->
            <section class="devices-search-section">
                <div class="search-container">
                    <input 
                        type="text" 
                        id="searchInput" 
                        class="search-input" 
                        placeholder="Search by Shipment"
                        value="{{ search_query or '' }}"
                    />
                    <button id="searchBtn" class="btn-primary">ğŸ” Search</button>
                </div>
            </section>

            <!-- Shipments Table -->
            <section class="devices-table-section">
                <table class="devices-table" id="devicesTable">
                    <thead>
                        <tr>
                            <th>Shipment</th>
                            <th>Device</th>
                            <th>Created At</th>
                            <th>Container</th>
                            <th>Batch ID</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% if shipments|length == 0 %}
                            <tr>
                                <td colspan="5">ğŸ“­ No shipments found.</td>
                            </tr>
                        {% else %}
                            {% for s in shipments %}
                                <tr>
                                    <td>{{ s.get('Shipment_Number') or s.get('Shipment') or 'â€”' }}</td>
                                    <td>{{ s.get('Device') or 'â€”' }}</td>
                                    <td>{{ s.get('created_at') or 'â€”' }}</td>                                       
                                    
                                    <td>{{ s.get('Container_number') or 'â€”' }}</td>
                                    <td>{{ s.get('Batch_ID') or 'â€”' }}</td>
                                </tr>
                            {% endfor %}
                        {% endif %}
                    </tbody>
                </table>
            </section>
        </main>
    </div>

    <script src="/static/app.js" defer></script>
    <script>
        // Optional: Enable Enter key search
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('searchBtn').click();
            }
        });
    </script>
</body>
</html>